"use strict";var ngApp=angular.module("myApp",["ngRoute","ngAnimate","ngCookies","satellizer"]);ngApp.constant("CONFIG",{apiEndpoint:"https://574b12c3.ngrok.io"}),ngApp.config(["CONFIG","$authProvider",function(t,e){e.baseUrl=t.apiEndpoint,e.loginUrl="/login"}]),ngApp.config(["$routeProvider",function(t){t.when("/",{controller:"PageOneController",templateUrl:"ng-templates/musictrack_page1.html"}).when("/genres",{controller:"PageTwoController",templateUrl:"ng-templates/musictrack_page2.html"}).otherwise({redirectTo:"/"})}]),ngApp.controller("LoadingController",["$scope",function(t){t.$on("$viewContentLoaded",function(){hideLoading()})}]),ngApp.directive("starRating",function(){return{scope:{rating:"=",maxRating:"@",readOnly:"@",click:"&",mouseHover:"&",mouseLeave:"&"},restrict:"EA",template:"<div style='display: inline; margin: 1px; padding-bottom: 15px; cursor:pointer;' ng-repeat='idx in maxRatings track by $index'>                     <img ng-src='{{((hoverValue + _rating) <= $index) && \"http://www.codeproject.com/script/ratings/images/star-empty-lg.png\" || \"http://www.codeproject.com/script/ratings/images/star-fill-lg.png\"}}'                     ng-Click='isolatedClick($index + 1)'                     ng-mouseenter='isolatedMouseHover($index + 1)'                     ng-mouseleave='isolatedMouseLeave($index + 1)'></img>             </div>",compile:function(t,e){(!e.maxRating||Number(e.maxRating)<=0)&&(e.maxRating="5")},controller:["$scope","$element","$attrs",function(t,e,n){t.maxRatings=[];for(var o=1;o<=t.maxRating;o++)t.maxRatings.push({});t._rating=t.rating}]}}),angular.element(document).ready(function(){angular.bootstrap(document,["myApp"])}),ngApp.factory("AJAXService",["$http",function(t){var e={},n=function(t){return{success:!1,status:t}};return e.getTredingSubReddits=function(){return t({method:"GET",url:"https://www.reddit.com/r/trending_subreddits.json"}).then(function(t){return console.warn(t),{success:!0,data:t.data}},function(t){return console.warn(t),n(t.status)})},e}]),ngApp.directive("backgroundImage",function(){return function(t,e,n){var o=n.backImg;e.css({background:"url("+o+") no-repeat"})}}),ngApp.directive("setWidthPercent",function(){return function(t,e,n){var o=n.setWidthPercent;e.css({width:o+"%"})}}),ngApp.controller("PageOneController",["CONFIG","$scope","$location","$window","$http",function(t,e,n,o,a){console.log("My Application"),e.filterParams={active:!1,searchText:null},e.selectedCity1="Select",e.selectedCity2="Select",e.selectedCity3="Select",e.selectedCity4="Select",e.updateCityList=function(t){console.log("current:",t),console.log("$scope.selectedCity1",e.selectedCity1),console.log("$scope.selectedCity2",e.selectedCity2),console.log("$scope.selectedCity3",e.selectedCity3),console.log("$scope.selectedCity4",e.selectedCity4)},a({method:"POST",url:"https://find-job-assignment.herokuapp.com/token"}).then(function(t){console.log("GET API TOKEN",t),e.trackList=t.data.results},function(t){}),a({method:"GET",url:"https://find-job-assignment.herokuapp.com/cities"}).then(function(t){console.log("SEARCH CITIES",t.data),e.cityList=t.data},function(t){console.log(t)}),a({method:"GET",url:"https://find-job-assignment.herokuapp.com/vehicles"}).then(function(t){console.log("SEARCH VEHICLES",t.data),e.vehicleList=t.data},function(t){console.log(t)}),e.findMusic=function(){e.filterParams.active=!0,e.trackList=angular.copy(myListBackUp),""==e.filterParams.searchText&&e.trackList.forEach(function(t,e){textFilter[e]=t}),e.filterParams.searchText&&(textFilter=e.trackList.filter(function(t,n){if(t.title.search(new RegExp(e.filterParams.searchText,"i"))>-1)return t})),e.trackList=textFilter.filter(function(t,e,n){return n.indexOf(t)==e})},e.resetFilter=function(){e.filterParams.active=!1,e.filterParams.searchText=null,e.trackList=angular.copy(myListBackUp)},e.addNewTrack=function(){a({method:"POST",url:"http://104.197.128.152:8000/v1/tracks",data:{title:"animals",rating:4.5,genres:[1]}}).then(function(t){console.log("Created Record",t),e.trackList.push(t.data),myListBackUp=angular.copy(e.trackList),e.trackList=angular.copy(myListBackUp)},function(t){console.log(t)})},e.goToGenrePage=function(){alert("go to genre page"),n.path("/page2")}}]),ngApp.controller("PageTwoController",["CONFIG","$scope","$location","$window","$http",function(t,e,n,o,a){var i=[];a({method:"GET",url:"http://104.197.128.152:8000/v1/genres"}).then(function(t){console.log("ALL GENRES",t.data),e.trackList=t.data.results,i=angular.copy(e.trackList)},function(t){console.log(t)}),a({method:"GET",url:"http://104.197.128.152:8000/v1/genres/12"}).then(function(t){console.log("SINGLE GENRE",t.data)},function(t){console.log(t)}),a({method:"POST",url:"http://104.197.128.152:8000/v1/genres/12",data:{id:11,name:"bollywood"}}).then(function(t){console.log("EDIT GENRE RECORD",t.data)},function(t){console.log(t)}),e.addNewGenre=function(){a({method:"POST",url:"http://104.197.128.152:8000/v1/genres",data:{name:"bollywood"}}).then(function(t){console.log(t.data),e.trackList.push(t.data),i=angular.copy(e.trackList),e.trackList=angular.copy(i)},function(t){console.log(t)})}}]);